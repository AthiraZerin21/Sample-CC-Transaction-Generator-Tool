<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sample Credit Card Transaction Generator</title>
 
<style>
body {
  font-family: Arial, sans-serif;
  margin: 0;
  padding: 0;
  background: linear-gradient(135deg,#f5f7fa 25%,#c3cfe2 100%);
}
 
header {
  background:#2c3e50;
  color:white;
  padding:15px 30px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
 
nav a {
  color:white;
  margin-left:20px;
  text-decoration:none;
  font-weight:bold;
}
 
.container { padding:20px 40px; }
 
.main-section {
  display:grid;
  grid-template-columns:2fr 1fr;
  gap:30px;
}
 
.form-section {
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}
 
input, select {
  width:100%;
  padding:6px;
  border-radius:6px;
  border:1px solid #ccc;
}
 
button {
  padding:8px 16px;
  background:#3498db;
  color:white;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
 
.options {
  background:#f9f9f9;
  padding:15px;
  border-radius:8px;
}
 
table {
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
}
 
th, td {
  border:1px solid #ddd;
  padding:6px;
  text-align:center;
}
 
th { background:#2c3e50; color:white; }
 
.expense-row {
  display:grid;
  grid-template-columns:1fr 100px;
  gap:10px;
  margin-bottom:4px;
}
</style>
</head>
 
<body>
 
<header>
  <h1>Sample Credit Card Transaction Generator</h1>
  <nav>
    <a href="{{ url_for('home') }}">Home</a>
    <a href="{{ url_for('about') }}">About</a>
  </nav>
</header>
 
<div class="container">
 
<form method="POST" action="/preview">
<div class="main-section">
 
<!-- LEFT SIDE -->
<div>
<h2>Input Fields</h2>
<div class="form-section">
 
<div>
<label>Cardholder Name</label>
<input type="text" name="cardholder_name" pattern="[A-Za-z ]+" required>
</div>
 
<div>
<label>Payment Type</label>
<input type="text" name="payment_type" pattern="[A-Za-z ]+" required>
</div>
 
<div>
<label>Card Types</label>
<select name="card_types" multiple required>
<option>Visa</option>
<option>MasterCard</option>
<option>Amex</option>
<option>RuPay</option>
</select>
</div>

 
<div>
<label>Currency</label>
<select name="currencies" multiple required>
<option>INR</option>
<option>USD</option>
<option>EUR</option>
<option>CAD</option>
</select>
</div>
 
<div>
<label>From Date</label>
<input type="date" name="from_date" required>
</div>
 
<div>
<label>To Date</label>
<input type="date" name="to_date" required>
</div>

 
<!-- Dynamic Expense Types -->
<div style="grid-column: span 1;">
<label>Expense Types</label>
<div id="expense-container">
  <div class="expense-row">
    <input type="text" name="expense_name[]" placeholder="Expense Type" required pattern="[A-Za-z ]+" style="margin-right: 4px"> 
	<input type="number" name="expense_count[]" placeholder="Count" min="1" required>
  </div>
</div>
<button type="button" onclick="addExpense()">+ Add More</button>
</div>
 
</div>
</div>
 
<!-- RIGHT SIDE OPTIONS -->
<div>
<h2>Options</h2>
<div class="options">
 
<label>No. of Negative Transactions</label>
<input type="number" name="negative_count" min="0" value="0">
 
<label>Download Format</label>
<select name="file_type" required>
<option value="">--Select--</option>
<option value="xlsx">Excel</option>
<option value="csv">Text</option>
</select>
 <br>
 <br>
<button type="submit">Preview Transactions</button>
 
</div>
</div>
 
</div>
</form>
 
<!-- PREVIEW TABLE -->
<h2>Preview</h2>
<table>
<thead>
<tr>
<th>Employee ID</th>
<th>Name</th>
<th>Card</th>
<th>Type</th>
<th>Expense</th>
<th>Vendor</th>
<th>Date</th>
<th>Amount</th>
</tr>
</thead>
<tbody>
{% if data %}
{% for row in data[:50] %}
<tr>
<td>{{row.employee_id}}</td>
<td>{{row.cardholder_name}}</td>
<td>{{row.card_number}}</td>
<td>{{row.card_type}}</td>
<td>{{row.expense_type}}</td>
<td>{{row.vendor_name}}</td>
<td>{{row.date}}</td>
<td>{{row.amount}}</td>
</tr>
{% endfor %}
{% else %}
<tr><td colspan="8">No transactions to preview</td></tr>
{% endif %}
</tbody>
</table>
 
<!-- DOWNLOAD BUTTON AFTER PREVIEW -->
{% if data %}
<form action="/download" method="POST">
<input type="hidden" name="data" value='{{ data|tojson|safe }}'>
<input type="hidden" name="file_type" value="{{ request.form.file_type }}">
<button type="submit">Download File</button>
</form>
{% endif %}
 
</div>
 
<script>
function addExpense() {
  const container = document.getElementById("expense-container");
  const div = document.createElement("div");
  div.className = "expense-row";
  div.innerHTML = `
    <input type="text" name="expense_name[]" placeholder="Expense Type" required pattern="[A-Za-z ]+">
    <input type="number" name="expense_count[]" placeholder="Count" min="1" required>
  `;
  container.appendChild(div);
}
</script>
 
</body>
</html>
